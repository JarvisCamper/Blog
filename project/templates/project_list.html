{% extends "layout.html" %}
{% load static %}

{% block title %}
This is my blog Project.
{% endblock %}

{% block content %}
<h1 class="text-center mt-4">Welcome to My Blog Project</h1>

<!-- Show search results info -->
{% if query %}
  <p class="text-center text-info">Showing results for: <strong>{{ query }}</strong></p>
{% endif %}

<a href="{% url 'project_create' %}" class="btn btn-primary mb-3">Create New Project</a>

<div class="container row gap-3">
  {% if projects %}
    {% for project in projects %}
    <div class="card bg-dark text-light border-secondary shadow" style="width: 18rem;">
      {% if project.photo %}
        <img src="{{ project.photo.url }}" class="card-img-top" alt="...">
      {% else %}
        <img src="{% static 'images/default.jpg' %}" class="card-img-top" alt="No image">
      {% endif %}
      <div class="card-body">
        <h5 class="card-title">{{ project.user.username }}</h5>
        <p class="card-text">{{ project.text }}</p>
        {% if project.user == user %}
          <a href="{% url 'project_edit' project.id %}" class="btn btn-primary btn-sm">Edit</a>
          <a href="{% url 'project_delete' project.id %}" class="btn btn-danger btn-sm">Delete</a>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  {% else %}
    <div class="alert alert-warning text-center" role="alert">
      No projects found{% if query %} for "<strong>{{ query }}</strong>"{% endif %}.
    </div>
  {% endif %}
</div>
{% endblock %}
